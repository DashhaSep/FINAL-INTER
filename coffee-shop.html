<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Корзина с бейджем</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 40px;
      }

      .product {
        display: inline-block;
        border: 1px solid #ccc;
        padding: 16px;
        margin: 10px;
        cursor: pointer;
        transition: 0.2s;
      }

      .product:hover {
        background-color: #f0f0f0;
      }

      /* Корзина и бейдж */
      #cartIconWrapper {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        cursor: pointer;
      }

      #cartIcon {
        width: 100%;
        height: auto;
      }

      #cartBadge {
        position: absolute;
        top: -8px;
        right: -8px;
        background-color: red;
        color: white;
        font-size: 12px;
        font-weight: bold;
        padding: 2px 6px;
        border-radius: 50%;
        display: none;
      }

      /* Модалка корзины */
      #cartModal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        z-index: 9999;
        justify-content: center;
        align-items: center;
      }

      .cart-content {
        background-color: white;
        padding: 30px;
        width: 90%;
        max-width: 600px;
        max-height: 90%;
        overflow-y: auto;
        border-radius: 8px;
        position: relative;
      }

      .cart-item {
        margin-bottom: 10px;
        font-size: 16px;
      }

      .total {
        margin-top: 20px;
        font-size: 18px;
        font-weight: bold;
      }

      .close-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        font-size: 20px;
        background: none;
        border: none;
        cursor: pointer;
      }

      .close-btn:hover {
        color: red;
      }
    </style>
  </head>
  <body>
    <h1>Каталог камней</h1>

    <div class="product" data-name="Розовый кварц" data-price="700">
      Розовый кварц — 700 ₽
    </div>
    <div class="product" data-name="Аметист" data-price="850">
      Аметист — 850 ₽
    </div>
    <div class="product" data-name="Обсидиан" data-price="600">
      Обсидиан — 600 ₽
    </div>

    <!-- Обёртка корзины с бейджем -->
    <div id="cartIconWrapper">
      <img
        src="https://cdn-icons-png.flaticon.com/512/263/263142.png"
        id="cartIcon"
        alt="Корзина"
      />
      <div id="cartBadge">0</div>
    </div>

    <!-- Модальное окно корзины -->
    <div id="cartModal">
      <div class="cart-content">
        <button class="close-btn" id="closeCart">&times;</button>
        <h2>Ваша корзина</h2>
        <div id="cartItems"></div>
        <div class="total">Итого: <span id="total">0</span> ₽</div>
      </div>
    </div>

    <script>
      const cart = [];
      const cartItemsContainer = document.getElementById("cartItems");
      const totalDisplay = document.getElementById("total");
      const cartModal = document.getElementById("cartModal");
      const cartIconWrapper = document.getElementById("cartIconWrapper");
      const closeCart = document.getElementById("closeCart");
      const cartBadge = document.getElementById("cartBadge");

      // Показать корзину
      cartIconWrapper.addEventListener("click", () => {
        cartModal.style.display = "flex";
      });

      // Закрыть корзину
      closeCart.addEventListener("click", () => {
        cartModal.style.display = "none";
      });

      // Закрыть по клику вне окна
      cartModal.addEventListener("click", (e) => {
        if (e.target === cartModal) {
          cartModal.style.display = "none";
        }
      });

      // Обновление корзины
      function updateCart() {
        cartItemsContainer.innerHTML = "";
        let total = 0;

        cart.forEach((item) => {
          const div = document.createElement("div");
          div.className = "cart-item";
          div.textContent = `${item.name} — ${item.price} ₽`;
          cartItemsContainer.appendChild(div);
          total += item.price;
        });

        totalDisplay.textContent = total;

        // Обновить бейдж
        if (cart.length > 0) {
          cartBadge.style.display = "block";
          cartBadge.textContent = cart.length;
        } else {
          cartBadge.style.display = "none";
        }
      }

      // Добавление товаров
      document.querySelectorAll(".product").forEach((product) => {
        product.addEventListener("click", () => {
          const name = product.getAttribute("data-name");
          const price = parseInt(product.getAttribute("data-price"));
          cart.push({ name, price });
          updateCart();
        });
      });
    </script>
  </body>
</html>
